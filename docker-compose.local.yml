# docker-compose.local.yml
# Override file for local PostgreSQL development
# Usage: docker compose -f docker-compose.yml -f docker-compose.local.yml up -d

version: '3.8'

services:
  # Local PostgreSQL configuration
  postgres:
    ports:
      - "5432:5432"
    environment:
      POSTGRES_DB: modbus_monitor
      POSTGRES_USER: ${POSTGRES_USERNAME:-modbus_user}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-modbus_pass}
    volumes:
      - postgres_data_local:/var/lib/postgresql/data

  # Override modbus-master for local development
  modbus-master:
    environment:
      POSTGRES_URL: jdbc:postgresql://postgres:5432/modbus_monitor
      POSTGRES_USERNAME: ${POSTGRES_USERNAME:-modbus_user}
      POSTGRES_PASSWORD: ${POSTGRES_PASSWORD:-modbus_pass}
      SPRING_JPA_SHOW_SQL: "true"

volumes:
  postgres_data_local:
    name: modbus-postgres-data-local
